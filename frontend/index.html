<!DOCTYPE html>
<html>
<head>
    <title>Volt-Chill Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 15px; background: #eee; }
        .card { background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        input, button { width: 100%; padding: 12px; margin: 5px 0; border-radius: 5px; }
        button { background: #28a745; color: white; border: none; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; background: white; margin-top: 10px; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    </style>
</head>
<body>
    <div class="card">
        <h3>âž• Add New Job</h3>
        <input type="text" id="customer" placeholder="Customer Name">
        <input type="text" id="service" placeholder="Service (AC Repair / Wiring)">
        <button onclick="submitJob()">Save Job</button>
    </div>

    <button style="background:#007bff" onclick="loadJobs()">ðŸ”„ Refresh Job List</button>
    <table id="jobTable"><thead><tr><th>Customer</th><th>Service</th></tr></thead><tbody id="list"></tbody></table>

    <script>
        async function submitJob() {
            const customer = document.getElementById('customer').value;
            const service = document.getElementById('service').value;
            await fetch('/api/jobs', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ customer_name: customer, service_type: service })
            });
            loadJobs();
        }
        async function loadJobs() {
            const res = await fetch('/api/jobs');
            const data = await res.json();
            document.getElementById('list').innerHTML = data.map(j => `<tr><td>${j.customer_name}</td><td>${j.service_type}</td></tr>`).join('');
        }
        window.onload = loadJobs;
    </script>
</body>
</html>
